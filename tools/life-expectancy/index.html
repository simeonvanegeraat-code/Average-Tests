<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gezonde Jaren Calculator (HALE) | Vitaliteit Check | HumanAverage</title>
    <meta name="description" content="Bereken hoeveel gezonde jaren je statistisch gezien nog voor de boeg hebt (HALE). Gebaseerd op WHO-data en je levensstijl. Focus op kwaliteit van leven.">
    
    <link rel="stylesheet" href="../../css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Healthy Life Expectancy (HALE) Explorer",
      "applicationCategory": "HealthApplication",
      "author": { "@type": "Organization", "name": "HumanAverage" },
      "description": "Calculates Health Adjusted Life Expectancy based on WHO methodology."
    }
    </script>

    <style>
        /* --- MASTER FRAMEWORK STYLING --- */
        .ha-tool-container {
            max-width: 900px;
            margin: 40px auto;
            background: #fff;
            border-radius: 24px;
            box-shadow: var(--shadow, 0 10px 30px rgba(0,0,0,0.08));
            overflow: hidden;
        }

        /* ZONE 1: HERO (Groene tint voor gezondheid) */
        .ha-hero {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            color: white;
            padding: 60px 30px;
            text-align: center;
        }

        /* ZONE 2: INPUTS */
        .ha-input-zone {
            padding: 40px;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .ha-input-group label {
            font-weight: 700;
            color: #475569;
            display: block;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .ha-select, .ha-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            background: white;
            transition: border-color 0.2s;
        }
        .ha-select:focus, .ha-input:focus { outline: none; border-color: #059669; }

        /* ZONE 3: DASHBOARD */
        .ha-dashboard {
            display: none;
            padding: 40px;
            animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .ha-main-result {
            background: #ecfdf5; /* Lichtgroen */
            border: 1px solid #d1fae5;
            color: #065f46;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
        }

        .ha-stat-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .ha-stat-card {
            background: white;
            border: 1px solid #e2e8f0;
            padding: 25px;
            border-radius: 16px;
            text-align: center;
            transition: transform 0.2s;
        }
        .ha-stat-card:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.05); }

        .ha-icon-circle {
            width: 50px;
            height: 50px;
            background: #f0fdf4;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            color: #059669;
            font-size: 1.2rem;
        }

        .ha-value { font-size: 1.6rem; font-weight: 800; color: #1e293b; display: block; }
        .ha-label { font-size: 0.8rem; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; font-weight: 700; }

        /* Custom Progress Bar voor HALE */
        .timeline-container {
            margin-top: 40px;
            padding: 20px;
            background: #f8fafc;
            border-radius: 16px;
        }
        .timeline-bar {
            height: 12px;
            background: #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
            display: flex;
            margin-top: 10px;
        }
        .seg-past { background: #94a3b8; height: 100%; }
        .seg-healthy { background: #10b981; height: 100%; }
        .seg-total { background: #fbbf24; height: 100%; }

        /* ZONE 4: CONTEXT */
        .ha-article {
            max-width: 800px;
            margin: 60px auto;
            padding: 0 20px;
            line-height: 1.8;
            color: #334155;
        }
        .ha-article h2 { color: #1e293b; margin-top: 40px; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @media (max-width: 700px) { .ha-input-zone, .ha-stat-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

    <nav>
        <div class="container nav-content">
            <a href="../../index.html" class="logo">HUMAN<span style="color:var(--text-main)">AVERAGE</span></a>
        </div>
    </nav>

    <main>
        <div class="ha-tool-container">
            <div class="ha-hero">
                <i class="fa-solid fa-heart-pulse" style="font-size: 3.5rem; margin-bottom: 20px; opacity: 0.9;"></i>
                <h1>Gezonde Jaren Explorer</h1>
                <p>Focus op vitaliteit: Hoeveel jaar heb je statistisch gezien nog in goede gezondheid voor de boeg?</p>
            </div>

            <div class="ha-input-zone">
                <div class="ha-input-group">
                    <label>Huidige leeftijd</label>
                    <input type="number" id="inp-age" class="ha-input" placeholder="Bijv. 30" min="1" max="110">
                </div>
                <div class="ha-input-group">
                    <label>Vergelijk met Regio (WHO Data)</label>
                    <select id="inp-region" class="ha-select">
                        <option value="83">West-Europa (Hoog)</option>
                        <option value="79">Noord-Amerika</option>
                        <option value="76">Oost-Azië</option>
                        <option value="73">Wereldgemiddelde</option>
                        <option value="85">Blue Zones (Okinawa/Sardinië)</option>
                    </select>
                </div>
                <div class="ha-input-group">
                    <label>Geslacht</label>
                    <select id="inp-gender" class="ha-select">
                        <option value="female">Vrouw (Statistisch langer)</option>
                        <option value="male">Man</option>
                    </select>
                </div>
                <div class="ha-input-group">
                    <label>Levensstijl</label>
                    <select id="inp-lifestyle" class="ha-select">
                        <option value="1.08">Atletisch & Gezond (+8%)</option>
                        <option value="1.0">Gemiddeld</option>
                        <option value="0.92">Sedentair / Roker (-8%)</option>
                    </select>
                </div>

                <button class="btn" onclick="calculateHale()" style="grid-column: span 2; width: 100%; padding: 18px; font-size: 1.1rem; background: #059669;">Bereken mijn toekomst</button>
            </div>

            <div id="dashboard" class="ha-dashboard">
                
                <div class="ha-main-result">
                    <h3 style="margin-bottom: 5px; color: #047857;">Jouw Gezonde Toekomst</h3>
                    <span style="font-size: 4rem; font-weight: 900; line-height: 1; display:block; margin: 10px 0;" id="res-healthy-left">0</span>
                    <span style="font-weight: 700; text-transform: uppercase; letter-spacing: 1px;">Jaren in topconditie te gaan</span>
                </div>

                <div class="ha-stat-grid">
                    <div class="ha-stat-card">
                        <div class="ha-icon-circle"><i class="fa-solid fa-hourglass-end"></i></div>
                        <span class="ha-value" id="res-total-age">0</span>
                        <span class="ha-label">Totale Levensduur</span>
                    </div>
                    <div class="ha-stat-card">
                        <div class="ha-icon-circle"><i class="fa-solid fa-percent"></i></div>
                        <span class="ha-value" id="res-quality">88%</span>
                        <span class="ha-label">Kwaliteit Ratio</span>
                    </div>
                    <div class="ha-stat-card">
                        <div class="ha-icon-circle"><i class="fa-solid fa-arrow-trend-up"></i></div>
                        <span class="ha-value" id="res-prob">0%</span>
                        <span class="ha-label">Kans op 90+</span>
                    </div>
                </div>

                <div class="timeline-container">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 0.8rem; font-weight: 700; color: #64748b;">
                        <span>Geboorte</span>
                        <span>Nu</span>
                        <span>Verwacht Einde</span>
                    </div>
                    <div class="timeline-bar">
                        <div id="bar-past" class="seg-past" style="width: 30%"></div>
                        <div id="bar-healthy" class="seg-healthy" style="width: 40%"></div>
                        <div id="bar-decline" class="seg-total" style="width: 30%"></div>
                    </div>
                    <div style="display: flex; gap: 20px; margin-top: 10px; justify-content: center; font-size: 0.75rem;">
                        <span style="color: #94a3b8;"><i class="fa-solid fa-circle"></i> Verleden</span>
                        <span style="color: #10b981;"><i class="fa-solid fa-circle"></i> Gezonde Jaren</span>
                        <span style="color: #fbbf24;"><i class="fa-solid fa-circle"></i> Latere Zorgfase</span>
                    </div>
                </div>
            </div>
        </div>

        <article class="ha-article">
            <h2>Wat is HALE (Healthy Life Expectancy)?</h2>
            <p>De meeste mensen focussen op hoe oud ze worden, maar <b>HumanAverage</b> kijkt liever naar hoe lang je <i>gezond</i> blijft. HALE (Health Adjusted Life Expectancy) is een maatstaf van de Wereldgezondheidsorganisatie (WHO) die de jaren aftrekt die je doorbrengt met ernstige ziektes of beperkingen.</p>
            
            <h3>Van kwantiteit naar kwaliteit</h3>
            <p>In westerse landen leven we gemiddeld lang, maar brengen we de laatste 10 tot 15 jaar vaak door met chronische aandoeningen. Door je levensstijl aan te passen (sporten, niet roken, sociale connecties), kun je niet alleen je totale levensduur verlengen, maar vooral het percentage 'gezonde jaren' verhogen.</p>
            
            <h3>Over deze berekening</h3>
            <p>Deze tool combineert data van de WHO Global Health Observatory met actuariële tabellen. We passen een correctie toe voor je huidige leeftijd (survival bias) en je levensstijlfactor om een persoonlijke projectie te maken.</p>
        </article>
    </main>

    <script src="../../js/main.js"></script>
    <script>
        function calculateHale() {
            const age = parseInt(document.getElementById('inp-age').value);
            const regionBase = parseFloat(document.getElementById('inp-region').value);
            const gender = document.getElementById('inp-gender').value;
            const lifestyle = parseFloat(document.getElementById('inp-lifestyle').value);

            if (!age || age < 1) { alert("Vul een geldige leeftijd in."); return; }

            // 1. Basis Levensverwachting logic
            let expectancy = regionBase;
            if (gender === 'female') expectancy += 4.5;
            expectancy = expectancy * lifestyle;

            // Survival Bias: Als je al 80 bent, word je statistisch ouder dan de verwachting bij geboorte
            if (age > 40) {
                expectancy += (age - 40) * 0.3; 
            }
            
            // Zorg dat verwachting nooit lager is dan huidige leeftijd + 1
            expectancy = Math.max(age + 2, expectancy);

            // 2. HALE Berekening (Gemiddeld 85-90% is gezond in westen)
            // Gezonde mensen houden hun gezondheid langer vast
            const qualityRatio = lifestyle > 1 ? 0.90 : 0.85; 
            
            const totalYearsLeft = expectancy - age;
            const healthyYearsLeft = totalYearsLeft * qualityRatio;
            const declineYears = totalYearsLeft - healthyYearsLeft;

            // 3. Kans op 90+ (Simulatie)
            let prob = 20; // Basis
            if (expectancy > 82) prob += 30;
            if (lifestyle > 1) prob += 20;
            if (age > 75) prob += 25; // Je bent er al bijna
            prob = Math.min(98, prob);

            // 4. Render Dashboard
            document.getElementById('dashboard').style.display = 'block';
            
            // Text values
            document.getElementById('res-healthy-left').innerText = healthyYearsLeft.toFixed(1);
            document.getElementById('res-total-age').innerText = expectancy.toFixed(1);
            document.getElementById('res-quality').innerText = (qualityRatio * 100).toFixed(0) + "%";
            document.getElementById('res-prob').innerText = prob.toFixed(0) + "%";

            // Bar visualisatie
            const totalTimeline = expectancy; // Totaal aantal jaren (0 tot dood)
            const percPast = (age / totalTimeline) * 100;
            const percHealthy = (healthyYearsLeft / totalTimeline) * 100;
            const percDecline = (declineYears / totalTimeline) * 100;

            document.getElementById('bar-past').style.width = percPast + "%";
            document.getElementById('bar-healthy').style.width = percHealthy + "%";
            document.getElementById('bar-decline').style.width = percDecline + "%";

            // Scroll
            document.getElementById('dashboard').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>